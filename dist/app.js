/*! For license information please see app.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sand=t():e.sand=t()}(self,(function(){return(()=>{var e={76:e=>{self,e.exports=(()=>{var e={801:(e,t,n)=>{n.g,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t),n.d(t,"EventEmitter",(function(){return c}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=function(e){return e instanceof Array?e:String(e).replace(/\s+/g,"").split(",")},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined";o()(this,e),this.name=t,this.events={}}return a()(e,[{key:"destroy",value:function(){this.events={}}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r=r||{},"function"!=typeof t)throw new TypeError("Invalid callback");return s(e).forEach((function(e){n.events[e]||(n.events[e]=[]),n.events[e].push({callback:t,options:r})})),this}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"off",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(e).filter((function(e){return!!t.events[e]})).forEach((function(e){if(n)for(var o=t.events[e].length;o--;){var i=t.events[e][o];(!i.options.persist||r)&&i.callback===n&&t.events[e].splice(o,1)}else t.events[e]=r?[]:t.events[e].filter((function(e){return!0===e.options.persist}))})),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return s(e).forEach((function(e){if(t.events[e])for(var n=t.events[e].length;n--;){var o=t.events[e][n],i=o.options,a=o.callback;try{a.apply(void 0,r)}catch(e){console.warn(e)}i&&i.once&&t.events[e].splice(n,1)}})),this}}]),e}()}])},1:(e,t,n)=>{e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,r){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var a=p((function(){t(o,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?f(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){t.resolve(e).then((function(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}),(function(e){r||(r=!0,i.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t,n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)t=e[a],this.resolve(t).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}));return s}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,v="readonly",g="readwrite";function m(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function y(e){return"boolean"==typeof d?a.resolve(d):function(e){return new a((function(t){var n=e.transaction(f,g),r=i([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function b(e){var t=h[e.name],n={};n.promise=new a((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function _(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function x(e,t){return new a((function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);b(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),_(e)}}))}function E(e){return x(e,!1)}function S(e){return x(e,!0)}function k(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return i([m(atob(e.data))],{type:e.type})}function N(e){return e&&e.__local_forage_encoded_blob}function C(e){var t=this,n=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function j(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),S(e)})).then((function(){return function(e){b(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,E(e).then((function(t){return e.db=t,k(e)?S(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw w(e,t),t}))}(e).then((function(){j(e,t,n,r-1)}))})).catch(n);n(o)}}var R={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=h[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=C);var i=[];function s(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&i.push(u._initReady().catch(s))}var l=o.forages.slice(0);return a.all(i).then((function(){return n.db=o.db,E(n)})).then((function(e){return n.db=e,k(n,t._defaultConfig.version)?S(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){j(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;N(r)&&(r=I(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){j(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),N(e)&&(e=I(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var o=new a((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===p.call(t)?y(i.db).then((function(e){return e?t:(n=t,new a((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){j(r._dbInfo,g,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return s(o,n),o},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){j(n._dbInfo,g,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){j(t._dbInfo,g,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){j(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){e<0?t(null):n.ready().then((function(){j(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){j(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;if(e.name){var c=e.name===n.name&&i._dbInfo.db?a.resolve(i._dbInfo.db):E(e).then((function(t){var n=h[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;b(e);var r=h[e.name],i=r.forages;t.close();for(var s=0;s<i.length;s++){var c=i[s];c._dbInfo.db=null,c._dbInfo.version=n}return new a((function(t,r){var i=o.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,_(n._dbInfo)}})).catch((function(t){throw(w(e,t)||a.resolve()).catch((function(){})),t}))}})):c.then((function(t){b(e);var n=h[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new a((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)_(r[t]._dbInfo)})).catch((function(t){throw(w(e,t)||a.resolve()).catch((function(){})),t}))}))}else r=a.reject("Invalid arguments");return s(r,t),r}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",T=O.length,L="arbf",D="blob",B="si08",P="ui08",F="uic8",U="si16",z="si32",H="ur16",W="ui32",q="fl32",V="fl64",K=T+L.length,J=Object.prototype.toString;function G(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=M.indexOf(e[t]),r=M.indexOf(e[t+1]),o=M.indexOf(e[t+2]),i=M.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function Z(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=M[n[t]>>2],r+=M[(3&n[t])<<4|n[t+1]>>4],r+=M[(15&n[t+1])<<2|n[t+2]>>6],r+=M[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var Q={serialize:function(e,t){var n="";if(e&&(n=J.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===J.call(e.buffer))){var r,o=O;e instanceof ArrayBuffer?(r=e,o+=L):(r=e.buffer,"[object Int8Array]"===n?o+=B:"[object Uint8Array]"===n?o+=P:"[object Uint8ClampedArray]"===n?o+=F:"[object Int16Array]"===n?o+=U:"[object Uint16Array]"===n?o+=H:"[object Int32Array]"===n?o+=z:"[object Uint32Array]"===n?o+=W:"[object Float32Array]"===n?o+=q:"[object Float64Array]"===n?o+=V:t(new Error("Failed to get type for BinaryArray"))),t(o+Z(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n="~~local_forage_type~"+e.type+"~"+Z(this.result);t("__lfsc__:blob"+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,T)!==O)return JSON.parse(e);var t,n=e.substring(K),r=e.substring(T,K);if(r===D&&A.test(n)){var o=n.match(A);t=o[1],n=n.substring(o[0].length)}var a=G(n);switch(r){case L:return a;case D:return i([a],{type:t});case B:return new Int8Array(a);case P:return new Uint8Array(a);case F:return new Uint8ClampedArray(a);case U:return new Int16Array(a);case H:return new Uint16Array(a);case z:return new Int32Array(a);case W:return new Uint32Array(a);case q:return new Float32Array(a);case V:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:G,bufferToString:Z};function X(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function $(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):X(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function Y(e,t,n,r){var o=this;e=u(e);var i=new a((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){$(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Y.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return s(i,n),i}function ee(e){return new a((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var te={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new a((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){X(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=Q,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){return Y.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return s(r=e.name?new a((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(ee(r))})).then((function(e){return new a((function(t,n){e.db.transaction((function(r){function o(e){return new a((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],s=0,c=e.storeNames.length;s<c;s++)i.push(o(e.storeNames[s]));a.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):a.reject("Invalid arguments"),t),r}};function ne(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var re={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=ne(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=Q,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new a((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return s(o,n),o},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return s(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return s(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return s(r=e.name?new a((function(t){e.storeName?t(ne(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),t),r}},oe=function(e,t){for(var n=e.length,r=0;r<n;){if((o=e[r])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;r++}var o,i;return!1},ie=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae={},se={},ce={INDEXEDDB:R,WEBSQL:te,LOCALSTORAGE:re},ue=[ce.INDEXEDDB._driver,ce.WEBSQL._driver,ce.LOCALSTORAGE._driver],le=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),de={description:"",driver:ue.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function he(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function pe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(ie(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ve=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce)if(ce.hasOwnProperty(n)){var r=ce[n],o=r._driver;this[n]=o,ae[o]||this.defineDriver(r)}this._defaultConfig=pe({},de),this._config=pe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=fe.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!oe(le,l)||e[l])&&"function"!=typeof e[l])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,r=le.length;n<r;n++){var o=le[n];e[o]||(e[o]=t(o))}}();var f=function(n){ae[r]&&console.info("Redefining LocalForage driver: "+r),ae[r]=e,se[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=ae[e]?a.resolve(ae[e]):a.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(Q);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;ie(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function s(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!se[e]},e.prototype._extend=function(e){pe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=fe.length;e<t;e++)he(this,fe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ve},{3:3}]},{},[4])(4)},183:(e,t,n)=>{n.g,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t),n.d(t,"EventEmitter",(function(){return c}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=function(e){return e instanceof Array?e:String(e).replace(/\s+/g,"").split(",")},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined";o()(this,e),this.name=t,this.events={}}return a()(e,[{key:"destroy",value:function(){this.events={}}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r=r||{},"function"!=typeof t)throw new TypeError("Invalid callback");return s(e).forEach((function(e){n.events[e]||(n.events[e]=[]),n.events[e].push({callback:t,options:r})})),this}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"off",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(e).filter((function(e){return!!t.events[e]})).forEach((function(e){if(n)for(var o=t.events[e].length;o--;){var i=t.events[e][o];(!i.options.persist||r)&&i.callback===n&&t.events[e].splice(o,1)}else t.events[e]=r?[]:t.events[e].filter((function(e){return!0===e.options.persist}))})),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return s(e).forEach((function(e){if(t.events[e])for(var n=t.events[e].length;n--;){var o=t.events[e][n],i=o.options,a=o.callback;try{a.apply(void 0,r)}catch(e){console.warn(e)}i&&i.once&&t.events[e].splice(n,1)}})),this}}]),e}()}])},198:(e,t,n)=>{n.g,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t),n.d(t,"EventEmitter",(function(){return c}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=function(e){return e instanceof Array?e:String(e).replace(/\s+/g,"").split(",")},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined";o()(this,e),this.name=t,this.events={}}return a()(e,[{key:"destroy",value:function(){this.events={}}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r=r||{},"function"!=typeof t)throw new TypeError("Invalid callback");return s(e).forEach((function(e){n.events[e]||(n.events[e]=[]),n.events[e].push({callback:t,options:r})})),this}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"off",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(e).filter((function(e){return!!t.events[e]})).forEach((function(e){if(n)for(var o=t.events[e].length;o--;){var i=t.events[e][o];(!i.options.persist||r)&&i.callback===n&&t.events[e].splice(o,1)}else t.events[e]=r?[]:t.events[e].filter((function(e){return!0===e.options.persist}))})),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return s(e).forEach((function(e){if(t.events[e])for(var n=t.events[e].length;n--;){var o=t.events[e][n],i=o.options,a=o.callback;try{a.apply(void 0,r)}catch(e){console.warn(e)}i&&i.once&&t.events[e].splice(n,1)}})),this}}]),e}()}])},272:(e,t,n)=>{e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,r){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var a=p((function(){t(o,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?f(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){t.resolve(e).then((function(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}),(function(e){r||(r=!0,i.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t,n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)t=e[a],this.resolve(t).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}));return s}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,v="readonly",g="readwrite";function m(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function y(e){return"boolean"==typeof d?a.resolve(d):function(e){return new a((function(t){var n=e.transaction(f,g),r=i([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function b(e){var t=h[e.name],n={};n.promise=new a((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function _(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function x(e,t){return new a((function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);b(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),_(e)}}))}function E(e){return x(e,!1)}function S(e){return x(e,!0)}function k(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return i([m(atob(e.data))],{type:e.type})}function N(e){return e&&e.__local_forage_encoded_blob}function C(e){var t=this,n=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function j(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),S(e)})).then((function(){return function(e){b(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,E(e).then((function(t){return e.db=t,k(e)?S(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw w(e,t),t}))}(e).then((function(){j(e,t,n,r-1)}))})).catch(n);n(o)}}var R={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=h[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=C);var i=[];function s(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&i.push(u._initReady().catch(s))}var l=o.forages.slice(0);return a.all(i).then((function(){return n.db=o.db,E(n)})).then((function(e){return n.db=e,k(n,t._defaultConfig.version)?S(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){j(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;N(r)&&(r=I(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){j(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),N(e)&&(e=I(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var o=new a((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===p.call(t)?y(i.db).then((function(e){return e?t:(n=t,new a((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){j(r._dbInfo,g,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return s(o,n),o},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){j(n._dbInfo,g,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){j(t._dbInfo,g,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){j(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){e<0?t(null):n.ready().then((function(){j(n._dbInfo,v,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){j(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;if(e.name){var c=e.name===n.name&&i._dbInfo.db?a.resolve(i._dbInfo.db):E(e).then((function(t){var n=h[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;b(e);var r=h[e.name],i=r.forages;t.close();for(var s=0;s<i.length;s++){var c=i[s];c._dbInfo.db=null,c._dbInfo.version=n}return new a((function(t,r){var i=o.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,_(n._dbInfo)}})).catch((function(t){throw(w(e,t)||a.resolve()).catch((function(){})),t}))}})):c.then((function(t){b(e);var n=h[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new a((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)_(r[t]._dbInfo)})).catch((function(t){throw(w(e,t)||a.resolve()).catch((function(){})),t}))}))}else r=a.reject("Invalid arguments");return s(r,t),r}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",T=O.length,L="arbf",D="blob",B="si08",P="ui08",F="uic8",U="si16",z="si32",H="ur16",W="ui32",q="fl32",V="fl64",K=T+L.length,J=Object.prototype.toString;function G(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=M.indexOf(e[t]),r=M.indexOf(e[t+1]),o=M.indexOf(e[t+2]),i=M.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function Z(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=M[n[t]>>2],r+=M[(3&n[t])<<4|n[t+1]>>4],r+=M[(15&n[t+1])<<2|n[t+2]>>6],r+=M[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var Q={serialize:function(e,t){var n="";if(e&&(n=J.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===J.call(e.buffer))){var r,o=O;e instanceof ArrayBuffer?(r=e,o+=L):(r=e.buffer,"[object Int8Array]"===n?o+=B:"[object Uint8Array]"===n?o+=P:"[object Uint8ClampedArray]"===n?o+=F:"[object Int16Array]"===n?o+=U:"[object Uint16Array]"===n?o+=H:"[object Int32Array]"===n?o+=z:"[object Uint32Array]"===n?o+=W:"[object Float32Array]"===n?o+=q:"[object Float64Array]"===n?o+=V:t(new Error("Failed to get type for BinaryArray"))),t(o+Z(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n="~~local_forage_type~"+e.type+"~"+Z(this.result);t("__lfsc__:blob"+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,T)!==O)return JSON.parse(e);var t,n=e.substring(K),r=e.substring(T,K);if(r===D&&A.test(n)){var o=n.match(A);t=o[1],n=n.substring(o[0].length)}var a=G(n);switch(r){case L:return a;case D:return i([a],{type:t});case B:return new Int8Array(a);case P:return new Uint8Array(a);case F:return new Uint8ClampedArray(a);case U:return new Int16Array(a);case H:return new Uint16Array(a);case z:return new Int32Array(a);case W:return new Uint32Array(a);case q:return new Float32Array(a);case V:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:G,bufferToString:Z};function X(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function $(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):X(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function Y(e,t,n,r){var o=this;e=u(e);var i=new a((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){$(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Y.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return s(i,n),i}function ee(e){return new a((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var te={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new a((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){X(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=Q,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){return Y.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){$(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){$(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return s(r=e.name?new a((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(ee(r))})).then((function(e){return new a((function(t,n){e.db.transaction((function(r){function o(e){return new a((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],s=0,c=e.storeNames.length;s<c;s++)i.push(o(e.storeNames[s]));a.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):a.reject("Invalid arguments"),t),r}};function ne(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var re={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=ne(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=Q,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new a((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return s(o,n),o},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return s(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return s(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return s(r=e.name?new a((function(t){e.storeName?t(ne(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),t),r}},oe=function(e,t){for(var n=e.length,r=0;r<n;){if((o=e[r])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;r++}var o,i;return!1},ie=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae={},se={},ce={INDEXEDDB:R,WEBSQL:te,LOCALSTORAGE:re},ue=[ce.INDEXEDDB._driver,ce.WEBSQL._driver,ce.LOCALSTORAGE._driver],le=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),de={description:"",driver:ue.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function he(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function pe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(ie(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ve=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce)if(ce.hasOwnProperty(n)){var r=ce[n],o=r._driver;this[n]=o,ae[o]||this.defineDriver(r)}this._defaultConfig=pe({},de),this._config=pe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=fe.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!oe(le,l)||e[l])&&"function"!=typeof e[l])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,r=le.length;n<r;n++){var o=le[n];e[o]||(e[o]=t(o))}}();var f=function(n){ae[r]&&console.info("Redefining LocalForage driver: "+r),ae[r]=e,se[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=ae[e]?a.resolve(ae[e]):a.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(Q);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;ie(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function s(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!se[e]},e.prototype._extend=function(e){pe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=fe.length;e<t;e++)he(this,fe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ve},{3:3}]},{},[4])(4)},883:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":host{\n    all:initial;\n}\n.container {\n    position: relative;\n    font-family: sans-serif;\n    font-size: 14px;\n    resize: both;\n    border-radius: 5px;  \n    min-height:400px;\n    width:100%;\n    display: flex;\n    flex-direction: column;\n}\n\n\n.dir {\n    list-style-type: none;\n}\n\n.item {\n    position: relative;\n    display: inline-block;\n    width: 6em;\n    height: 9em;\n    overflow: visible;\n    vertical-align:middle;\n    z-index: 1;\n}\n.item .thumbnail {\n    width: 4em; \n    height: 4em; \n    margin-left: 1em;\n    margin-right: 1em;\n    padding-top: 1em;\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    vertical-align:middle;\n    text-align: center;\n    word-wrap:break-word; \n }\n.item .unselected {\n    color: grey; \n    background-color: #EEE;\n}\n.item .selected {\n    background-color: lightgreen;\n    color: white;\n}\n\n.item .filename {\n    text-align: center;\n    word-wrap:break-word; \n    padding: 2px;\n}\n\n.content {\n    position: absolute;\n    top: 30px;\n    left: 0px;\n    background-color: #F7F7F7;\n    width: 100%;\n    height: calc(100% - 30px);\n    border-radius: 0px 0px 5px 0px;\n}\n.menubar {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    padding: 2px 2px 0px 2px;\n    height: 28px;\n    background-color: #333;\n    color: #FFFFFF;\n    width: calc(100% - 5px);\n    border-radius: 5px 5px 0px 0px;\n}\n\n.footer {\n    position: absolute;\n    left: 0px;\n    background-color: #333;\n    color: # FFFFFF;\n    height: 30px;\n    border-radius: 0px 0px 5px 0px;\n}\n.content-menu {\n    padding: 3px;\n    background-color:white;\n    min-height: 27px;\n}\n\n.content-menu input {\n    margin-left: 2px;\n}\n\n",""]);const i=o},135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,':host {\n    all: initial;\n}\n\n.container {\n    position: relative;\n    font-family: sans-serif;\n    font-size: 14px;\n    resize: both;\n    border-radius: 5px;  \n    min-height:400px;\n    width:100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.sidebar {\n    margin: 0;\n    padding: 0;\n    width: 200px;\n    background-color: #f1f1f1;\n    position: absolute;\n    overflow: auto;\n    top: 30px;\n    left: 0px;\n    border-radius: 0px 0px 0px 5px;\n    height: calc(100% - 30px);\n}\n\n.sidebar a {\n    display: block;\n    color: black;\n    padding: 16px;\n    text-decoration: none;\n}\n\n.sidebar a.active {\n    background-color: #4CAF58;\n    color: white;\n}\n\n.sidebar a:hover:not(.active) {\n    background-color: #555;\n    color: white;\n}\n.sidebar-menu,.content-menu {\n    padding: 3px;\n}\n.content-menu input {\n    margin-left: 2px;\n}\n.sidebar-menu input {\n    margin-left: 2px;\n}\n\n.content {\n    position: absolute;\n    top: 30px;\n    left: 200px;\n    background-color: #F7F7F7;\n    width: calc(100% - 200px);\n    height: calc(100% - 30px);\n    border-radius: 0px 0px 5px 0px;\n}\n.menubar {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    padding: 2px 2px 0px 2px;\n    height: 28px;\n    background-color: #333;\n    color: #FFFFFF;\n    width: calc(100% - 5px);\n    border-radius: 5px 5px 0px 0px;\n}\n\n.footer {\n    position: absolute;\n    left: 0px;\n    background-color: #333;\n    color: # FFFFFF;\n    height: 30px;\n    border-radius: 0px 0px 5px 0px;\n}\n\n.bottom {\n    position: absolute;\n    bottom: 0px;\n}\n\n.btn {\n    cursor: default;\n    text-align: center;\n}\n\n.btn: hover {\n    background-color: #006F6F;\n    color: white;\n}\n\n.dir {\n    list-style-type: none;\n}\n\n.item {\n    position: relative;\n    display: inline-block;\n    width: 6em;\n    height: 9em;\n    overflow: visible;\n    vertical-align:middle;\n    z-index: 1;\n}\n\n.item .thumbnail {\n    width: 4em; \n    height: 4em; \n    margin-left: 1em;\n    margin-right: 1em;\n    padding-top: 1em;\n    margin-top: 0.5em;\n    margin-bottom: 0.5em;\n    vertical-align:middle;\n    text-align: center;\n    word-wrap:break-word; \n    color: grey; \n    background-color: #EEE;\n}\n\n.item .filename {\n    text-align: center;\n    word-wrap:break-word; \n    padding: 2px;\n}\n\n.sidebar-ul {\n    list-style-type: none;\n}\n\n.drive:hover {\n    background-color: #006F6F;\n    color: white;\n}\n\n.pwd-btn {\n    background-color: #006F6F; \n    color: white;\n    text-align: center;\n}\n\n\n.tooltip {\n  width: 150px;\n  border-radius: 3px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  padding: 10px;\n  text-align: center;\n  background: #777;\n  color: #FFFFFF;\n}\n.tooltip::after {\n    position: absolute;\n    content: "";\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 5px;\n    border-color: transparent;\n}\n\n.tooltip[data-popper-placement=bottom] {\n    margin-top: 5px;\n    font-size: x-small;\n}\n.tooltip[data-popper-placement=bottom]::after {\n    border-top-width: 0;\n    border-bottom-color: #777;\n    top: -5px;\n    left: calc(50% -5px);\n}\n',""]);const i=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";var e;n.r(r),n.d(r,{Bridge:()=>I,BridgeNode:()=>y,BroadcastNode:()=>m,DataAdaptor:()=>be,DataAgent:()=>_e,FileStore:()=>ge,GenericContainer:()=>Je,GenericLayout:()=>Le,GenericPackage:()=>Ge,MemoryStore:()=>ke,Node:()=>p,Packages:()=>Me,Parsers:()=>oe,ReflexElement:()=>j,RegisterMap:()=>Ne,Responder:()=>h,Services:()=>Ze,StateBridge:()=>N,StateNode:()=>v,UIBridge:()=>Pt,UIDataAgent:()=>ut,UIDropBox:()=>bt,UIFileStore:()=>pt,UIModal:()=>Tt,UISimpleRender:()=>At,UIStateBridgeIO:()=>Dt,UIURIDropBox:()=>St,WorkerHub:()=>w,customElementsDefine:()=>Qe,dispatch:()=>Jt,fetchBlob:()=>z,getNode:()=>Ie,safeClose:()=>De,serviceBridge:()=>Gt,serviceData:()=>Zt});var t=new Uint8Array(16);function o(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&i.test(e)};for(var s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));const u=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var l=n(183);class f extends l.EventEmitter{constructor(){super(),this._uuid=u()}onMessage(e,t){}set uuid(e){this._uuid=e}get uuid(){return this._uuid}}const h=f,p=class extends h{constructor(){super(),this.outputs={},this.inputs={},this._onMessage=this._onMessage_,this._process=function(e){return e},this._effect=!1,this.history=Array(10).fill(""),this.hi=0,this.postMessage=function(){},this.onMessage=function(){}}set name(e){this._name=e}get name(){return this._name||this.uuid}set process(e){this._process=e}get process(){return this._process}set effect(e){this._effect=e}get effect(){return this._effect}set onMessage(e){var t=this;this._onMessage=function(n,r){var o=t._onMessage_(n,r);return o&&("_onMessageEffect_"in t&&t.effect&&t._onMessageEffect_(n,r),e(n,r)),o}}get onMessage(){return this._onMessage}set postMessage(e){var t=this;this._postMessage=function(n){if("string"==typeof n){var r={};r.text=n,n=r}"_uuid_"in n||(n._uuid_=u()),t._postMessage_(n),"_postMessageEffect_"in t&&t.effect&&t._postMessageEffect_(n),e(n)}}get postMessage(){return this._postMessage}_onMessage_(e,t){var n=this;if(t=t||e._from_,void 0===e)return!1;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}if(!("_uuid_"in e))return console.log("Warning: without _uuid_",n.name),!1;for(var r=0;r<10;r++)if(e._uuid_===n.history[r])return console.log("a.uuid equal history",e._uuid_),!1;if("string"==typeof t){var o={};o[t]=1,t=o}var i=n.uuid,a=JSON.parse(JSON.stringify(t)),s=0;Object.keys(a).forEach((e=>{s<a[e]&&(s=a[e])})),a[i]=s+1,this.history[this.hi]=e._uuid_;var c=n.process(e);return Object.keys(this.outputs).forEach((function(e){e in t||n.outputs[e].onMessage(c,a)})),!0}_postMessage_(e){var t=this;this.history[this.hi]=e._uuid_,this.hi=(this.hi+1)%10;var n={};n[t.uuid]=1,Object.keys(this.outputs).forEach((function(r){t.outputs[r].onMessage(e,n)}))}register(e,t){var n=t||e.uuid;this.outputs[n]=e,e.inputs[this.uuid]=this}linkto(e,t){this.register(e,t)}deregister(e){var t;null!=e&&("string"==typeof e?t=e:"string"==typeof e.uuid&&(t=e.uuid),delete this.outputs[t].inputs[this.uuid],delete this.outputs[t])}unlink(e){this.deregister(e)}size(){return Object.keys(this.outputs).length}inputSize(){return Object.keys(this.inputs).length}close(){var e=this;Object.keys(this.outputs).forEach((t=>{e.deregister(t)})),Object.keys(this.inputs).forEach((t=>{e.inputs[t].deregister(e.uuid)})),this.emit("close")}static get is(){return"node"}},v=class extends p{constructor(e={}){super(),this.data={},this.listener={},this.state={},this.setState(e),this.ready=!0}static get is(){return"state"}_onMessage_(e,t){var n,r=this,o=super._onMessage_(e,t);if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return o&&("code"in e&&"set"==e.code&&"data"in e&&("key"in(n=e.data)&&"value"in n?(r.ready=!1,r._update_(n.key,n.value)):console.warn("error set value",n)),"code"in e&&"delete"==e.code&&"data"in e&&("key"in(n=e.data)?(r.ready=!1,r._delete_(n.key)):console.warn("error delete",n.key))),o}setState(e){var t=this;Object.keys(this.data).forEach((n=>{n in e||t._delete_(n)})),t.extendState(e),t.emit("setState",e)}extendState(e){var t=this;Object.keys(e).forEach((n=>{t.define(n),t.set(n,e[n])}))}getState(){return this.state}_update_(e,t){var n;this.data&&e in this.data&&(n=this.data[e]),e in this.state||this.define(e),this.data[e]=t,this.listener&&e in this.listener&&this.listener[e](t,n),t!==n&&this.emit("change",{key:e,old:n,new:t})}set(e,t){this.state[e]=t}get(e){return this.state[e]}onChange(e,t){this.listener[e]=t}define(e,t){var n=this;return e in n.state?0:(Object.defineProperty(this.state,e,{configurable:!0,get:function(){return n.data[e]},set:function(t){n._update_(e,t),n.postMessage({code:"set",data:{key:e,value:t}}),n.ready=!0}}),n.data[e]=n.data[e]||void 0,void 0!==t&&(n.listener[e]=t),!0)}_delete_(e){var t=this.data[e];if(e in this.state){delete this.state[e];var n=this.data[e];delete this.data[e],e in this.listener&&(this.listener[e](void 0,n),delete this.listener[e])}this.emit("change",{key:e,old:t,new:void 0})}delete(e){this._delete_(e),this.postMessage({code:"delete",data:{key:e}}),this.ready=!0}close(){super.close(),this.listener=null,this.data=null,this.state=null}},g=class extends v{constructor(e,t){super(t),this.storageId=e,this.fetchStorage()}saveToStorage(){localStorage.setItem(this.storageId,JSON.stringify(this.data))}fetchStorage(){var e=localStorage.getItem(this.storageId),t=!1;try{if(e&&void 0!==e){var n=JSON.parse(e);this.setState(n),t=!0}}catch(e){console.warn(e)}return t}static get is(){return"storage"}},m=class extends g{constructor(e,t,n){var r;super(r=0==e.length?t:e+"/"+t,n),this.namespace=e,this.chan=new BroadcastChannel(r),console.log("connect to broadcast channel",r),this.chanId=t,this.fetchStorage(),this._name=t;var o=r+"-"+u(),i=this;this.chanUuid=o,this.chan.onmessage=function(e){var t=e.data,n={};n[o]=1,i.onMessage(t,n)}}_postMessage_(e){super._postMessage_(e),this.chan&&this.chan.postMessage(e)}_onMessage_(e,t){var n=super._onMessage_(e,t);if(n){if("string"==typeof t){var r={};r[t]=1,t=r}this.chanUuid in t||this.chan.postMessage(e)}return n}close(){console.log("broadcast channel close",this.namespace,this.chanId),this.chan.close(),super.close()}static get is(){return"broadcast"}},y=class extends v{async connect(){var e=this,t=e.chanId,n=e.bridgeUuid,r=e.extId;return new Promise(((o,i)=>{try{window.chrome.runtime.sendMessage(r,{message:"version"},(i=>{var a;i&&i.version?(i.version,(a=window.chrome.runtime.connect(r)).postMessage({chanId:t}),a.onDisconnect.addListener((function(e){console.log("disconnect to extension ",r)})),e.onMessage=function(e,t){if("string"==typeof t){var r={};r[t]=1,t=r}n in t||a.postMessage(e)},e.port=a,e.ready=!0,e.on("close",(e=>{a.disconnect()})),a.onMessage.addListener((function(t){"_code_"in t?("state"==t._code_&&e.setState(t.data),o(a)):(t._from_=n,e.postMessage(t))})),a.postMessage({_code_:"getState"})):(e.ready=!1,o("not connect"))}))}catch(t){e.ready=!1,o("not connect")}}))}constructor(e,t,n,r){super(r);var o=this;e.length>0?o.chanId=e+"-"+t||"reflex-bridge-01":o.chanId=t||"reflex-bridge-01",o.extId=n||"fdkkfkobdhkphjaafbiaekmkfeenajfk",o.bridgeUuid=o.chanId+"-"+u()}static get is(){return"bridge"}},b=class extends m{constructor(e,t,n){super(e,t),this.worker=n,"error"!==this.worker.status&&(this.worker.worker.port.onmessage=e=>{var n=e.data;"getStateResult"==n.code&&(n.data&&Object.keys(n.data).length>0?this.setState(n.data):Object.keys(this.data).length>0&&this.worker.worker.port.postMessage({code:"setState",channel:t,data:this.data}))},this.worker.worker.port.postMessage({code:"getState",channel:t}))}_onMessage_(e,t){var n,r=super._onMessage_(e,t);return"error"!==this.worker.status&&r&&!(this.chanUuid in t)&&("code"in e&&"set"==e.code&&"data"in e&&"key"in(n=e.data)&&"value"in n&&this.worker.worker.port.postMessage({code:"set",channel:this.chanId,key:n.key,value:n.value}),"code"in e&&"delete"==e.code&&"data"in e&&"key"in(n=e.data)&&this.worker.worker.port.postMessage({code:"delete",channel:this.chanId,key:n.key})),r}static get is(){return"worker"}close(){super.close(),"error"!==this.worker.status&&this.worker.worker.port.postMessage({code:"close",channel:this.chanId})}};class _ extends l.EventEmitter{constructor(e="reflexiv",t="./bridge-worker.js"){if(super(e),this.namespace=e,this.status="inited",this.WorkerURL=t,window.SharedWorker)try{var n=new SharedWorker(this.WorkerURL,this.namespace);n.onerror=e=>{console.log("error",e),this.status="error",this.emit("error")},this.worker=n}catch(e){}}}const w=_,x=async(e,t,n,r,o,i,a,s)=>(t in e||(e[t]=o(),"connect"in e[t]&&(await e[t].connect(),0==e[t].ready&&(e[t].close(),delete e[t],console.log("not connect bridge"),console.log("downgrade to worker broadcast node"),e[t]=new b(s,i,a))),e[t].name=i),n?e[t].register(r):r.register(e[t]),e[t]),E=(e,t,n,r)=>{n?e[t].deregister(r):r.deregister(e[t]);var o=e[t].size()+e[t].inputSize();return 0==e[t].size()&&0==e[t].inputSize()&&(e[t].close(),console.log("close channel",t),delete e[t]),o},S=e=>{Object.keys(e).forEach((t=>{e[t].close()}))},k=(e,t)=>{var n,r,o=!0;return"string"==typeof e?(n=e,r=t):"string"==typeof t&&(n=t,r=e,o=!1),{n,node:r,forward:o}},I=class extends Object{constructor(e,t={}){super(),this.A={},this.B={},this.C={},this._ns=e||"reflexiv",this.extId=t.extId||"djcdicpaejhpgncicoglfckiappkoeof",this.worker=new w(this.namespace,t.WorkerURL)}set namespace(e){this._ns=e}get namespace(){return this._ns}generateChanId(e){return this.namespace+"/"+e}async link(e,t){var n,r=this,o=k(e,t),i=o.n,a=o.node,s=o.forward,c=i.split("-"),u=i,l=this.extId;return 2==c.length?("a"==c[0]&&(n=await x(this.A,i,s,a,(()=>new v),u)),"b"==c[0]&&(n=await x(this.B,i,s,a,(()=>new b(r.namespace,u,r.worker)),u)),"c"==c[0]&&(n=await x(this.C,i,s,a,(()=>new y(r.namespace,u,l)),u,r.worker,r.namespace)),"N"==c[0]&&(u=c[1],n=await x(this.C,c[1],s,a,(()=>new y("",c[1],l)),c[1],r.worker))):n=await x(this.A,i,s,a,(()=>new p),u),n}unlink(e,t){var n=k(e,t),r=n.n,o=n.node,i=n.forward;if(void 0===r)return!1;var a,s=r.split("-");return 2==s.length?("a"==s[0]&&(a=E(this.A,r,i,o)),"b"==s[0]&&(a=E(this.B,r,i,o)),"c"==s[0]&&(a=E(this.C,r,i,o)),"N"==s[0]&&(a=E(this.C,s[1],i,o))):a=E(this.A,r,i,o),a}getNode(e){var t,n=e.split("-");return 2==n.length?("a"==n[0]&&(t=this.A[e]||void 0),"b"==n[0]&&(t=this.B[e]||void 0),"c"==n[0]&&(t=this.C[e]||void 0),"N"==n[0]&&(t=this.C[n[1]]||void 0)):t=this.A[e]||void 0,t}close(){S(this.A),S(this.B),S(this.C)}},N=class extends I{constructor(e="reflexiv",t={}){super(e,t),this.worker=new w(this.namespace,t.WorkerURL)}async link(e,t){var n=await super.link(e,t),r=k(e,t),o=(r.n,r.node),i=r.forward;return console.log("chan is ",n.constructor.is||"not defined"),console.log("node is ",o.constructor.is||"not defined"),i&&"state"in o&&"node"!==n.constructor.is&&(o.localDef?Object.keys(o.data).forEach((e=>{var t,r=o.data[e];e in n.data&&(t=n.data[e]),o.data[e]=t,e in o.listener&&o.listener[e](t,r)})):(console.log("set node state",n,n.data),o.setState(n.data))),n}};class C extends HTMLElement{constructor(){super();var e=new v;this._node_=e,this.linkto=e.linkto.bind(e),this.register=e.register.bind(e),this.unlink=e.unlink.bind(e),this.deregister=e.deregister.bind(e),this._onMessage_=e._onMessage_.bind(e),this._postMessage_=e._postMessage_.bind(e),this.process=e.process.bind(e),this.effect=e.effect,this.name=e.name,this.inputs=e.inputs,this.outputs=e.outputs,this.history=e.history,this.hi=e.hi,this.setState=e.setState.bind(e),this.getState=e.getState.bind(e),this.extendState=e.extendState.bind(e),this.define=e.define.bind(e),this.set=e.set.bind(e),this.get=e.get.bind(e),this.delete=e.delete.bind(e),this.onChange=e.onChange.bind(e),this.data=e.data,this.listener=e.listener,this.state=e.state,this.uuid=e.uuid,this.ready=!0,this.on=e.on.bind(e),this.off=e.off.bind(e),this.emit=e.emit.bind(e),this.once=e.once.bind(e),this.postMessage=function(){},this.onMessage=function(){}}set onMessage(e){var t=this;this._onMessage=function(n,r){var o=t._onMessage_(n,r);return o&&("_onMessageEffect_"in t&&t.effect&&t._onMessageEffect_(n,r),e(n,r)),o}}get onMessage(){return this._onMessage}set postMessage(e){var t=this;this._postMessage=function(n){if("string"==typeof n){var r={};r.text=n,n=r}"_uuid_"in n||(n._uuid_=uuidv4()),t._postMessage_(n),"_postMessageEffect_"in t&&t.effect&&t._postMessageEffect_(n),e(n)}}get postMessage(){return this._postMessage}close(){super.close&&"function"==typeof super.close&&super.close(),this._node_.close()}}const j=C;var R=n(198);function M(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}const A=e=>{var t=e.map((e=>new RegExp("."+e+"$")));return e=>{var n=!1;return t.forEach((t=>{null!==e.match(t)&&(n=!0)})),n}},O=e=>(t,n)=>r=>{if(null!==r){var o=r.split(","),i=atob(o[1]);t(e(i))}else n("value not found")},T=["json","JSON"],L={key:"json",is:A(T),suffixes:T,parse:O(JSON.parse),fetch:function(e,t){return fetch(e,t).then(M)}};function D(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function B(e,t){return fetch(e,t).then(D)}const P=["txt","svg","text","uri"],F={key:"text",is:A(P),parse:O((e=>e)),suffixes:P,fetch:B},U=e=>{const t=new FileReader;return t.readAsDataURL(e),new Promise((e=>{t.onloadend=()=>{e(t.result)}}))},z=(e,t)=>new Promise(((n,r)=>{fetch(e,t).then((e=>("404"==e.status&&r({error:"not found"}),e.blob()))).then(U).then((e=>{n(e)})).catch((e=>{r(e)}))}));var H=["png","jpg","JPG","jpeg","PNG","bmp"];const W={key:"img",is:A(H),suffixes:H,parse:(e,t)=>n=>{null!==n?e(n):t("value not found")},fetch:z};var q={},V={};function K(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function J(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function G(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Z(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,o=[],i=e.length,a=0,s=0,c=i<=0,u=!1;function l(){if(c)return V;if(u)return u=!1,q;var t,r,o=a;if(34===e.charCodeAt(o)){for(;a++<i&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=i?c=!0:10===(r=e.charCodeAt(a++))?u=!0:13===r&&(u=!0,10===e.charCodeAt(a)&&++a),e.slice(o+1,t-1).replace(/""/g,'"')}for(;a<i;){if(10===(r=e.charCodeAt(t=a++)))u=!0;else if(13===r)u=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(o,t)}return c=!0,e.slice(o,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==V;){for(var f=[];r!==q&&r!==V;)f.push(r),r=l();t&&null==(f=t(f,s++))||o.push(f)}return o}function o(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function i(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?(o=(n=e).getUTCHours(),i=n.getUTCMinutes(),a=n.getUTCSeconds(),s=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((r=n.getUTCFullYear())<0?"-"+G(-r,6):r>9999?"+"+G(r,6):G(r,4))+"-"+G(n.getUTCMonth()+1,2)+"-"+G(n.getUTCDate(),2)+(s?"T"+G(o,2)+":"+G(i,2)+":"+G(a,2)+"."+G(s,3)+"Z":a?"T"+G(o,2)+":"+G(i,2)+":"+G(a,2)+"Z":i||o?"T"+G(o,2)+":"+G(i,2)+"Z":"")):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e;var n,r,o,i,a,s}return{parse:function(e,t){var n,o,i=r(e,(function(e,r){if(n)return n(e,r-1);o=e,n=t?function(e,t){var n=K(e);return function(r,o){return t(n(r),o,e)}}(e,t):K(e)}));return i.columns=o||[],i},parseRows:r,format:function(t,n){return null==n&&(n=J(t)),[n.map(a).join(e)].concat(o(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=J(e)),o(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:a}}var Q=Z("\t"),X=Q.parse,$=(Q.parseRows,Q.format,Q.formatBody,Q.formatRows,Q.formatRow,Q.formatValue,Z(",")),Y=$.parse;function ee(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),B(t,n).then((function(t){return e(t,r)}))}}$.parseRows,$.format,$.formatBody,$.formatRows,$.formatRow,$.formatValue,ee(Y);var te=ee(X);const ne=["tsv","TSV"],re={key:"tsv",is:A(ne),suffixes:ne,suffixes:ne,parse:O(X),fetch:te},oe=class{constructor(e={}){this.suffixMap={},this.parsers={},e.empty||this._init_()}_init_(){this.add(L),this.add(re),this.add(W),this.add(F)}add(e){var t=this;e.key in t.parsers?console.warn("duplicated parser key",e.key):(t.parsers[e.key]=e,e.suffixes.forEach((n=>{n in t.suffixMap?console.warn("duplicated parser for same suffix",n):t.suffixMap[n]=e.key})))}getParser(e){var t=e.split(".").pop();return t in this.suffixMap?this.parsers[this.suffixMap[t]]:null}remove(e){e in self.parsers&&(self.parsers[e].suffixes.forEach((t=>{self.suffixMap[t]==e&&delete self.suffixMap[t][e]})),delete self.parsers[e])}},ie=new RegExp(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi),ae=new RegExp(/gsheet:\/\/[\S]{44}\/\S+/),se=new RegExp(/storage:\/\/\S+\/\S+/);var ce=n(272),ue=n.n(ce);const le={svg:"image/svg+xml",tsv:"text/tab-separated-values",csv:"text/comma-separated-values",txt:"text/plain",text:"text/plain",png:"image/png",bmp:"image/bmp",jpg:"image/jpg",json:"application/json"},fe=e=>le[e]||"text/plain",de=e=>{var t=e.split("/");return{fileName:t.pop(),storeName:t.pop()}},he=(e,t)=>{var n=e.split(".");if(n.length>1){var r=n.pop(),o=n.join(".");return(o+=" ("+t+")")+"."+r}return e+"("+t+")"},pe=async(e,t)=>{for(var n=0,r=t;n<1e4;){var o;if(await e.getItem(r).then((e=>{o=e})),null===o)break;r=he(t,n+=1)}return r};class ve extends R.EventEmitter{constructor(e="reflexiv",t={}){super(e),this._namespace=e,this._options=t,this._initStore()}_initStore(){var e=this;this.stores={};let t=ue().createInstance({name:e.namespace+"_os",storeName:"stores",size:4980736,version:3,description:e.ns+" os",driver:"asyncStorage"});this._stores_=t,this._stores_.keys().then((t=>{t.forEach((t=>{e.createStore(t,e.options.size)})),e.emit("inited",t)}))}set options(e){this._options=e}get options(){return this._options}set namespace(e){this._safeCloseStore(),this._namespace=e,this._initStore()}get namespace(){return this._namespace}createStore(e,t){let n=ue().createInstance({name:this.namespace+"_store",storeName:e,size:t||79691776,description:this.ns+" drive "+e,driver:"asyncStorage"});this.stores[e]=n;var r={created:(new Date).getTime()};this._stores_.setItem(e,r)}_safeCloseStore(){let e=this;"namespace"in e&&(ue().dropInstance({name:e.namespace+"_store"}).then((()=>{console.log("Dropped store "+e.namespace)})),ue().dropInstance({name:e.namespace+"_os"}).then((()=>{console.log("Dropped store "+e.namespace)})))}makeFilesHandler(e){let t=this;return n=>{let r=n.target.files;for(var o,i=0;o=r[i];i++){var a=new FileReader;a.onload=function(n){return function(r){var o=r.target.result;pe(t.stores[e],n.name).then((n=>{t.create(e,n,o)}))}}(o),a.readAsDataURL(o)}}}makeFetch(e){let t=this;return(n,r={})=>{fetch(n,r).then((e=>e.text())).then((r=>{var o=n.split(".").pop(),i="data:"+fe(o)+";base64,"+btoa(r),a=n.split("/").pop();pe(t.stores[e],a).then((n=>{t.create(e,n,i)}))})).catch((e=>{console.warn(e)}))}}create(e,t,n){var r=this;e in r.stores||r.createStore(e),r.stores[e].getItem(t),r.stores[e].setItem(t,n).then((()=>{r.emit("create",{URI:"storage://"+e+"/"+t,fn:t,store:e})})).catch((e=>{console.warn(e)}))}getItem(e,t){return e in this.stores?this.stores[e].getItem(t):new Promise(((e,t)=>{t({error:"store not found"})}))}list(e){return e in this.stores?this.stores[e].keys():new Promise(((e,t)=>{t({error:"store not found"})}))}delete(e,t){var n=this;return e in n.stores?(n.stores[e].removeItem(t),n.emit("delete",{store:e,fn:t}),0):-1}removeStore(e){var t=this;e in t.stores&&(t.stores[e].clear(),t.stores[e].dropInstance({storeName:e,name:t.namespace+"_store"}).then((e=>{console.log("drop",e)})).catch((e=>{console.warn(e)})),delete t.stores[e],t._stores_.removeItem(e),t.emit("removeStore",{store:e}))}move(e,t){var n=de(e),r=de(t),o=this,i=o.stores[n.storeName].getItem(n.fileName);return null===i?-1:(pe(o.stores[r.storeName],r.fileName).then((e=>{o.create(r.storeName,e,i),o.delete(n.storeName,n.fileName)})),0)}copy(e,t){var n=de(e),r=de(t),o=this,i=o.stores[n.storeName].getItem(n.fileName);return null===i?-1:(pe(o.stores[r.storeName],r.fileName).then((e=>{o.create(r.storeName,e,i)})),0)}close(){this.emit("close"),this._safeCloseStore()}}const ge=ve,me=e=>new Promise((function(t,n){n({error:e})}));class ye extends R.EventEmitter{constructor(e,t={}){super(e);var n=this;this.namespace=e,"fs"in t?(this.fs=t.fs,this._close=()=>{}):(this.fs=new ge(e),this._close=()=>{n.fs.close()}),this._options=t,this._apiKey=t.apiKey||"AIzaSyBhECk4C1LpxI1mDJjSTwot-hRP2v3bwEA",this.buffer={},this.parsers=t.parsers||new oe}get parsers(){return this._parsers}set parsers(e){this._fetchStore_=(e=>(t,n)=>new Promise((function(r,o){if("getItem"in n)n.getItem(t).then((n=>{var i=e.getParser(t);null!==i&&i.parse(r,o)(n),o("not support this format")})).catch((e=>{o(e)}));else{var i=n[t];if(void 0!==i){var a=e.getParser(t);null!==a&&a.parse(r,o)(i),o("not support this format")}else o("value not found")}})))(e),this._fetchURL_=(e=>(t,n)=>{var r=e.getParser(t);return null!==r?r.fetch(t,n):new Promise((function(e,t){t({error:"not support this format"})}))})(e),this._parsers=e}set apiKey(e){this._apiKey=e}get apiKey(){return this._apiKey}set options(e){this._options=e}get options(){return this._options}_fetchURL(e,t){return this._fetchURL_(e,this.options.fetchURLOptions||{})}_fetchLocalStorage(e,t){var n=e.split("/"),r=n[2],o=n[3];return this._fetchStore_(o,this.fs.stores[r])}_fetchGoogleSheet(e,t){var n=e.split("/");return((e,t,n)=>function(){var e="AIzaSyBhECk4C1LpxI1mDJjSTwot-hRP2v3bwEA",t="",n="Sheet1",r="A:ZZZ",o={},i=function(){return new Promise((function(i,a){var s=function(e,t,n,r){return"https://sheets.googleapis.com/v4/spreadsheets/"+e+"/values/"+t+"!"+n+"?key="+r}(t,n,r,e);fetch(s,o).then((function(e){return e.json()})).then((function(e){var t=function(e){var t=e[0],n=t.length,r=new Array(n-1);return r.columns=e[0],e.forEach((function(e,n){if(0!=n){var o={};e.forEach((function(e,n){o[t[n]]=e})),r[n-1]=o}})),r}(e.values);i(t)})).then((function(e){a(e)}))}))};return i.apiKey=function(t){return arguments.length?(e=t,i):e},i.sheetId=function(e){return arguments.length?(t=e,i):t},i.sheetTitle=function(e){return arguments.length?(n=e,i):n},i.range=function(e){return arguments.length?(r=e,i):r},i.options=function(e){return arguments.length?(o=e,i):o},i}().sheetId(e).sheetTitle(t).apiKey(n)())(n[2],n[3],this.apiKey)}_fetch_(e,t){let n=this;var r=(e=>null!==e.match(ae)?{type:"sheet",data:e.split(":").pop().replace("//","")}:null!==e.match(se)?{type:"storage",data:e.split(":").pop().replace("//","")}:null!==e.match(ie)?{type:"web",data:e}:null)(e);return null==r?me("parsing URI error"):"sheet"==r.type?n._fetchGoogleSheet(e,t):"storage"==r.type?n._fetchLocalStorage(e,t):"web"==r.type?n._fetchURL(e,t):me("URI type not support")}fetch(e,t){var n=this;return new Promise(((r,o)=>{n._fetch_(e,t).then((e=>{r(e)})).catch((e=>{o(e)}))}))}close(){this._close(),this.emit("close")}}const be=ye,_e=class extends be{constructor(e,t={}){super(e,t),this.buffer={}}fetch(e,t){var n=this;return e in this.buffer?new Promise(((t,r)=>{t(n.buffer[e])})):n.refetch(e,t)}refetch(e,t){var n=this;return new Promise(((r,o)=>{super.fetch(e,t).then((t=>{n.buffer[e]=t,n.emit("dataReady",{URI:e}),r(t)})).catch((e=>{o(e)}))}))}clear(){let e=this;for(let t in e.buffer)delete e.buffer[t];this.emit("clear",e.buffer)}list(){return Object.keys(this.buffer).sort()}delete(e){e in this.buffer&&(delete this.buffer[e],this.emit("delete",{URI:e}))}},we=e=>{var t=e.split("/");return{fileName:t.pop(),storeName:t.pop()}},xe=(e,t)=>{var n=e.split(".");if(n.length>1){var r=n.pop(),o=n.join(".");return(o+=" ("+t+")")+"."+r}return e+"("+t+")"},Ee=async(e,t)=>{for(var n=0,r=t;n<1e4;){var o;if(o=r in e?r:null,console.log(o),null===o)break;r=xe(t,n+=1)}return r};class Se extends R.EventEmitter{constructor(e="reflexiv",t={}){super(e),this._namespace=e,this._options=t,this._initStore()}_initStore(){this.stores={},this.emit("inited")}set options(e){this._options=e}get options(){return this._options}set namespace(e){this._safeCloseStore(),this._namespace=e,this._initStore()}get namespace(){return this._namespace}createStore(e,t){this.stores[e]={}}_safeCloseStore(){this.stores=null}makeFilesHandler(e){let t=this;return n=>{let r=n.target.files;for(var o,i=0;o=r[i];i++){var a=new FileReader;a.onload=function(n){return function(r){var o=r.target.result;Ee(t.stores[e],n.name).then((n=>{t.create(e,n,o)}))}}(o),a.readAsDataURL(o)}}}makeFetch(e){let t=this;return(n,r={})=>{fetch(n,r).then((e=>e.text())).then((r=>{var o=n.split(".").pop(),i="data:"+fe(o)+";base64,"+btoa(r),a=n.split("/").pop();Ee(t.stores[e],a).then((n=>{t.create(e,n,i)}))})).catch((e=>{console.warn(e)}))}}create(e,t,n){var r=this;e in r.stores||(r.stores[e]={}),r.stores[e][t]=n,r.emit("create",{URI:"storage://"+e+"/"+t,fn:t,store:e})}getItem(e,t){var n=this;return e in n.stores?new Promise(((r,o)=>{t in n.stores[e]?r(n.stores[e][t]):o({error:"file not found"})})):new Promise(((e,t)=>{t({error:"store not found"})}))}list(e){var t=this;return e in this.stores?new Promise(((n,r)=>{n(Object.keys(t.stores[e]))})):new Promise(((e,t)=>{t({error:"store not found"})}))}delete(e,t){var n=this;return e in n.stores?(delete n.stores[e][t],n.emit("delete",{store:e,fn:t}),0):-1}removeStore(e){delete this.stores[e],this.emit("removeStore",{store:e})}move(e,t){var n=we(e),r=we(t),o=this,i=o.stores[n.storeName][n.fileName];return null===i?-1:(Ee(o.stores[r.storeName],r.fileName).then((e=>{o.create(r.storeName,e,i),o.delete(n.storeName,n.fileName)})),0)}copy(e,t){var n=we(e),r=we(t),o=this,i=o.stores[n.storeName][n.fileName];return null===i?-1:(Ee(o.stores[r.storeName],r.fileName).then((e=>{o.create(r.storeName,e,i)})),0)}close(){this.emit("close"),this._safeCloseStore()}}const ke=Se;function Ie(e){var t,n;return(n="getElement"in e&&"function"==typeof e.getElement?e.getElement():e).nodeType?t=n:n.jquery?t=n.get(0):"node"in n&&(t=n.node()),t}const Ne=class{constructor(){this.map={}}Get(e){return this.map[e]||null}Add(...e){return this.Register(...e)}Register(e,t=null){var n,r;return"string"==typeof e&&null!==t?(n=e,r=t):"name"in e&&(n=e.name,r=e),!(n in this.map)&&(this.map[n]=r,!0)}Remove(e){return this.Deregister(e)}Deregister(e){return e in this.map&&(delete this.map[e],!0)}ListKeys(){return Object.keys(this.map).sort()}List(){var e=this;return Object.keys(this.map).sort().map((t=>e.map[t]))}Map(){return this.map}};var Ce={name:"example",render:e=>(e,t)=>{e.setState(t),e.getElement().html("<h2>"+t.text+"</h2>")},initState:{text:"Example1 Init State"}},je={name:"example2",render:e=>(e,t)=>{e.setState(t),e.getElement().html("<h3>"+t.text+"</h3>")},initState:{text:"Example2 Init State"}},Re={name:"example3",render:(e,t)=>(e,t)=>{e.setState(t);var n=Ie(e.getElement());n.innerHTML="";var r=document.createElement("input");r.setAttribute("value",t.text),n.appendChild(r),r.addEventListener("keyup",(({key:e})=>{"Enter"===e&&r.blur()})),r.onblur=function(){var n=r.value;t.text=n,e.setState(t)}},initState:{text:"Example3 Init State"}};const Me=class extends Ne{constructor(){super()}initDemo(){return this.Register(Ce),this.Register(je),this.Register(Re),this}};var Ae=n(1),Oe=n.n(Ae);class Te extends HTMLElement{constructor(){super(),this._core={},this._packages=new Me,this.panelDb=Oe().createInstance({name:this.namespace+"_paneldb"})}set core(e){this._core=e}get core(){return this._core}set namespace(e){"panelDb"in this&&(this.panelDb=Oe().createInstance({name:this.namespace+"_paneldb"})),this.setAttribute("namespace",e)}get namespace(){return this.getAttribute("namespace")||"sand"}set packages(e){this._packages=e}get packages(){return this._packages}}const Le=Te,De=function(e){"function"==typeof e&&e(),"object"==typeof e&&"emit"in e&&e.emit("close")};var Be,Pe=new Uint8Array(16);function Fe(){if(!Be&&!(Be="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Be(Pe)}const Ue=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ze=function(e){return"string"==typeof e&&Ue.test(e)};for(var He=[],We=0;We<256;++We)He.push((We+256).toString(16).substr(1));const qe=function(e,t,n){var r=(e=e||{}).random||(e.rng||Fe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(He[e[t+0]]+He[e[t+1]]+He[e[t+2]]+He[e[t+3]]+"-"+He[e[t+4]]+He[e[t+5]]+"-"+He[e[t+6]]+He[e[t+7]]+"-"+He[e[t+8]]+He[e[t+9]]+"-"+He[e[t+10]]+He[e[t+11]]+He[e[t+12]]+He[e[t+13]]+He[e[t+14]]+He[e[t+15]]).toLowerCase();if(!ze(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var Ve=n(801);class Ke extends Ve.EventEmitter{constructor(e,t){super(),this._el=e,this._uuid=qe(),this.state=t||{}}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get el(){return this._el}set el(e){this._el=e}get height(){return this._height||void 0}set height(e){this._height=e}get width(){return this._width||void 0}set width(e){this._width=e}getElement(){return this._el}getNode(){return this._el}updateSize(){}getState(){return this.state}setState(e){this.state=e}extendState(e){this.state={...this.state,...e}}}const Je=Ke,Ge=class{constructor(e,t,n,r={},o=[]){this.name=e,this.version=t,this.render=n,this.initState=r,this.dependencies=o}set name(e){this._name=e}get name(){return this._name}set version(e){this._version=e}get version(){return this._version}},Ze=class extends Ne{constructor(){super()}},Qe=(e,t=null)=>{"string"!=typeof e&&"is"in e&&(e=(t=e).is);var n=customElements.get(e);return void 0===n?customElements.define(e,t):t=n,t},Xe=(e,t=null)=>{"string"!=typeof e&&"is"in e&&(e=(t=e).is);var n=customElements.get(e);return void 0===n?customElements.define(e,t):t=n,t},$e=new RegExp(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi),Ye=new RegExp(/gsheet:\/\/[\S]{44}\/\S+/),et=new RegExp(/storage:\/\/\S+\/\S+/),tt=n(883).Z.toString(),nt=e=>(e.preventDefault&&e.preventDefault(),!1),rt=e=>{e.target.classList.add("over")},ot=e=>{e.target.classList.remove("over"),e.target.style.backgroundColor=null};function it(e){e.stopPropagation(),this.style.opacity="0.4",e.dataTransfer.effectAllowed="move",console.log("drag start",this.value,this.getAttribute("URI")),e.dataTransfer.setData("URI",this.getAttribute("URI"))}function at(e){e.stopPropagation(),this.style.opacity="1"}class st extends HTMLElement{static get is(){return"reflex-ui-data-agent"}constructor(e){super(),this.shadow=this.attachShadow({mode:"open"}),this.agent=e,this.render()}set agent(e){this._agent=e}get agent(){return this._agent}connectedCallback(){}disconnectedCallback(){}render(){var e=this,t=document.createElement("style");t.innerHTML=tt,this.shadow.appendChild(t);var n=document.createElement("div");n.className="container";var r=document.createElement("div");r.className="menubar",r.innerHTML="Data Objects";var o=document.createElement("div");o.className="content";var i=document.createElement("div");i.className="content-menu";var a=document.createElement("div");a.style.display="none",a.innerHTML="";var s=document.createElement("input");s.setAttribute("type","button"),s.setAttribute("value","delete"),s.onclick=t=>{t.stopPropagation(),e.agent.delete(d),h("")},a.appendChild(s);var c=document.createElement("input");c.setAttribute("type","button"),c.setAttribute("value","open"),c.onclick=t=>{t.stopPropagation(),console.log(e.agent.buffer[d])},a.appendChild(c),i.appendChild(a),o.appendChild(i);var u=document.createElement("ul");n.appendChild(r),n.appendChild(o),o.appendChild(u),this.div=n,this.ul=u,this.shadow.appendChild(n),o.addEventListener("drop",(e=>t=>{t.stopPropagation(),t.preventDefault&&t.preventDefault();var n=t.dataTransfer.getData("URI");return ot(t),e.fetch(n).then((e=>{})),!1})(e.agent),!1),o.addEventListener("dragenter",rt,!1),o.addEventListener("dragleave",ot,!1),o.addEventListener("dragover",nt,!1),o.addEventListener("click",(e=>{e.stopPropagation(),h("")}),!1);var l=this.agent.list().sort(),f={},d="",h=e=>{for(var t in d=e,f)f[t].getElementsByClassName("thumbnail")[0].classList.remove("selected"),f[t].getElementsByClassName("thumbnail")[0].classList.add("unselected");e in f?(f[e].getElementsByClassName("thumbnail")[0].classList.add("selected"),f[e].getElementsByClassName("thumbnail")[0].classList.remove("unselected"),a.style.display=null):a.style.display="none"};l.forEach((t=>{f[t]=ct(e.ul,t),f[t].onclick=e=>{e.stopPropagation(),h(t)}})),e.agent.on("dataReady",(t=>{f[t.URI]=ct(e.ul,t.URI),f[t.URI].onclick=e=>{e.stopPropagation(),h(t.URI)}})),e.agent.on("delete",(e=>{f[e.URI].remove(),delete f[e.URI]})),e.agent.on("clear",(()=>{f={},e.ul.innerHTML=""}))}}const ct=(e,t)=>{var n,r=document.createElement("li"),o=document.createElement("div"),i=null!==(n=t).match(Ye)?{type:"sheet",data:n.split(":").pop().replace("//","")}:null!==n.match(et)?{type:"storage",data:n.split(":").pop().replace("//","")}:null!==n.match($e)?{type:"web",data:n}:null;if(null!==t){o.className="thumbnail",o.classList.add("unselected"),o.innerHTML=i.type;var a=document.createElement("div");return a.className="filename",a.innerHTML=i.data,r.append(o),r.append(a),r.className="item",r.setAttribute("draggable",!0),r.addEventListener("dragstart",it,!1),r.addEventListener("dragend",at,!1),r.setAttribute("URI",t),console.log(t),e.appendChild(r),r}return null},ut=Xe(st),lt=n(135).Z.toString();function ft(e){e.stopPropagation(),this.style.opacity="0.4",e.dataTransfer.effectAllowed="move",console.log("drag start",this.value,this.getAttribute("URI")),e.dataTransfer.setData("URI",this.getAttribute("URI"))}function dt(e){e.stopPropagation(),this.style.opacity="1"}class ht extends HTMLElement{static get is(){return"reflex-ui-file-store"}constructor(e,t,n={}){super(),this.shadow=this.attachShadow({mode:"open"}),this.fs=e,this.node=t,this.args=n,this.render()}connectedCallback(){}disconnectedCallback(){}render(){var e=this,t=document.createElement("style");t.innerHTML=lt,this.shadow.appendChild(t),this.div=document.createElement("div"),this.div.className="container",this.menu=document.createElement("div"),this.menu.className="menubar",this.menu.innerHTML="Store | ",this.sidebar=document.createElement("div"),this.sidebar.className="sidebar";var n=document.createElement("div");n.className="sidebar-menu",this.sidebar.appendChild(n);var r=document.createElement("input");r.setAttribute("type","button"),r.setAttribute("value","New"),r.setAttribute("title","Create a new store"),n.appendChild(r),r.onclick=t=>{var n=prompt("Please enter a file store name:","");if(null==n||""==n);else{var r=b(n);e.storeList.appendChild(r),E(n)}};var o=document.createElement("input");o.setAttribute("type","button"),o.setAttribute("value","Delete"),o.setAttribute("title","Delete this store"),n.appendChild(o),o.onclick=t=>{t.stopPropagation(),m&&confirm('Please confirm delete store "'+m+'" ?')&&e.fs.removeStore(m)},e.fs.on("removeStore",(t=>{for(var n=t.store,r=e.storeList.getElementsByTagName("a"),o=0;o<r.length;o++)r[o].innerHTML==n&&r[o].remove();e.ul.innerHTML=""})),this.content=document.createElement("div"),this.content.className="content";var i=document.createElement("div");i.className="content-menu",this.content.appendChild(i),this.div.appendChild(this.menu),this.div.appendChild(this.sidebar),this.div.appendChild(this.content);var a=document.createElement("input");a.setAttribute("type","file");var s=document.createElement("input");s.setAttribute("type","button"),s.setAttribute("value","Upload"),s.setAttribute("title","Upload a file from drive"),s.onclick=e=>{a.click()};var c=document.createElement("input");c.setAttribute("type","button"),c.setAttribute("value","Fetch"),c.setAttribute("title","Fetch a file from web URL"),c.onclick=e=>{var t=prompt("Please enter a Web URL:","");null==t||""==t||y(t,{})};var u=document.createElement("span");u.innerHTML=" | ";var l=document.createElement("input");l.setAttribute("type","button"),l.setAttribute("value","URI"),l.setAttribute("title","Add a URI Link"),l.onclick=t=>{var n=prompt("Please enter a code [FileName]|[gsheet://SpreadSheetId/SheetTitle] ","");if(null==n||""==n);else{var r=(e=>{var t=e.split("|");return{key:t.shift(),value:t.join("|")}})(n);e.fs.create(m,r.key+".uri",r.value)}};var f=document.createElement("input");f.setAttribute("type","button"),f.setAttribute("value","Download"),f.onclick=t=>{t.stopPropagation(),e.fs.getItem(m,w).then((e=>{((e,t)=>{console.log("download",t);var n=document.createElement("a");n.download=t,n.href=e,n.click()})(e,w)})).catch((e=>{console.warn(e,d)}))};var h=document.createElement("input");h.setAttribute("type","button"),h.setAttribute("value","Delete"),h.onclick=t=>{t.stopPropagation(),confirm('Please confirm delete file "'+w+'" ?')&&e.fs.delete(m,w)};var p=document.createElement("input");p.setAttribute("type","button"),p.setAttribute("value","Rename"),p.onclick=t=>{t.stopPropagation();var n=prompt("Please enter a new file name:",w);null==n||""==n||n==w||e.fs.move("storage://"+m+"/"+w,"storage://"+m+"/"+n)};var v=document.createElement("input");v.setAttribute("type","button"),v.setAttribute("value","Copy"),v.onclick=t=>{t.stopPropagation();var n=m+"/"+w,r=prompt("Please enter a new file path:",n);null==r||""==r||r==n||e.fs.copy("storage://"+n,"storage://"+r)};const g=e=>{u.style.display=e,f.style.display=e,v.style.display=e,h.style.display=e,p.style.display=e};g("none"),i.appendChild(s),i.appendChild(c),i.appendChild(l),i.appendChild(u),i.appendChild(f),i.appendChild(p),i.appendChild(v),i.appendChild(h),this.ul=document.createElement("ul"),this.ul.className="dir",this.content.appendChild(this.ul),this.content.addEventListener("click",(t=>{w="";for(var n=e.ul.getElementsByTagName("li"),r=0;r<n.length;r++)n[r].getElementsByClassName("filename")[0].style.backgroundColor=null;g("none")})),e.storeList=document.createElement("div"),e.sidebar.appendChild(e.storeList);var m,y,b=e=>{var t=document.createElement("a");return t.innerHTML=e,t.onclick=()=>{e!==m&&E(e)},t},_={},w="",x=t=>{var n=document.createElement("li");t.match(/\.uri$/)?e.fs.getItem(m,t).then((e=>{n.setAttribute("URI",e)})):n.setAttribute("URI","storage://"+m+"/"+t),_[t]=n,n.innerHTML="<div><div class='thumbnail'></div><div class='filename'>"+t+"</div></div>";var r=n.getElementsByClassName("thumbnail")[0],o=t.split(".").pop(),i=document.createTextNode(o.toUpperCase());r.appendChild(i),e.ul.appendChild(n),n.onclick=r=>{r.stopPropagation(),w=t;for(var o=e.ul.getElementsByTagName("li"),i=0;i<o.length;i++)o[i].getElementsByClassName("filename")[0].style.backgroundColor=null;n.getElementsByClassName("filename")[0].style.backgroundColor="lightgreen",g(null)},n.className="item",n.setAttribute("draggable",!0),n.addEventListener("dragstart",ft,!1),n.addEventListener("dragend",dt,!1)},E=t=>{!function(e){if(e.value)try{e.value=""}catch(o){if(e.value){var t=document.createElement("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),n.insertBefore(e,r)}}}(a);for(var n=e.storeList.getElementsByTagName("a"),r=0;r<n.length;r++)n[r].innerHTML==t?n[r].classList.add("active"):n[r].classList.remove("active");for(var o in m=t,w="",g("none"),t in e.fs.stores||(console.log("create store",t),e.fs.createStore(t)),e.menu.innerHTML="Data Store | "+m,a.onchange=e.fs.makeFilesHandler(t),y=e.fs.makeFetch(t),_)delete _[o];var i=this.fs.list(t);this.ul.innerHTML="",i.then((e=>{e.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))).forEach((e=>{x(e)}))}))};this.fs.on("delete",(e=>{e.store==m&&_[e.fn].remove()})),this.fs.on("create",(t=>{t.store===m&&(t.fn in _||(x(t.fn),(e=>{var t,n,r,o;for(n=!0;n;){for(n=!1,r=e.getElementsByTagName("li"),t=0;t<r.length-1;t++)if(o=!1,r[t].innerHTML.toLowerCase()>r[t+1].innerHTML.toLowerCase()){o=!0;break}o&&(r[t].parentNode.insertBefore(r[t+1],r[t]),n=!0)}})(e.ul)))})),this.fs.on("move",(e=>{})),this.fs.on("close",(e=>{}));const S=t=>{t.forEach((t=>{var n=b(t);e.storeList.appendChild(n)})),t.length>0&&E(t[0])};this.fs.on("inited",S);var k=Object.keys(this.fs.stores);k.length>0&&S(k),this.shadow.appendChild(this.div)}update(){}}const pt=Xe(ht),vt=e=>(console.log("dragover"),e.preventDefault&&e.preventDefault(),!1),gt=e=>{console.log("dragenter"),e.target.classList.add("over")},mt=e=>{console.log("dragleave"),e.target.classList.remove("over"),e.target.style.backgroundColor=null};class yt extends HTMLElement{constructor(e,t){super(),this.shadow=this.attachShadow({mode:"open"}),this.adaptor=e,this.node=t,t.define("data",(e=>{}));var n=document.createElement("div");n.className="dropBox",n.addEventListener("drop",((e,t)=>n=>{n.stopPropagation(),n.preventDefault&&n.preventDefault();var r=n.dataTransfer.getData("URI");return mt(n),n.target.innerHTML=r,e.fetch(r).then((e=>{t.set("data",{key:r,value:e})})),console.log("drop"),!1})(e,t),!1),n.addEventListener("dragenter",gt,!1),n.addEventListener("dragleave",mt,!1),n.addEventListener("dragover",vt,!1),this.shadow.innerHTML='\n\t\t    <style>\n\t\t\t:host{\n                all:initial;\n\t\t\t}\n            .over {\n                background-color:"lightblue"\n            }\n             .dropBox {\n                 height: 100px;\n                 width: 200px;\n                 border: 1px solid;\n                 font-size: small;\n                 overflow: auto;\n             }\n\t\t    </style>\n        ',this.shadow.appendChild(n)}static get is(){return"reflex-drop-box"}}Xe(yt);const bt=yt,_t=e=>(console.log("dragover"),e.preventDefault&&e.preventDefault(),!1),wt=e=>{console.log("dragenter"),e.target.classList.add("over")},xt=e=>{console.log("dragleave"),e.target.classList.remove("over"),e.target.style.backgroundColor=null};class Et extends HTMLElement{constructor(e){super(),this.shadow=this.attachShadow({mode:"open"}),this.adaptor=adaptor,this.node=e,e.define("data",onchange);var t=document.createElement("div");t.className="dropBox",t.addEventListener("drop",((e,t)=>e=>{e.stopPropagation(),e.preventDefault&&e.preventDefault();var n=e.dataTransfer.getData("URI");return xt(e),e.target.innerHTML=n,t.set("data",{key:n,value:n}),!1})(adaptor,e),!1),t.addEventListener("dragenter",wt,!1),t.addEventListener("dragleave",xt,!1),t.addEventListener("dragover",_t,!1),this.shadow.innerHTML='\n\t\t    <style>\n\t\t\t:host{\n                all:initial;\n\t\t\t}\n            .over {\n                background-color:"lightblue"\n            }\n             .dropBox {\n                 height: 100px;\n                 width: 200px;\n                 border: 1px solid;\n                 font-size: small;\n                 overflow: auto;\n             }\n\t\t    </style>\n        ',this.shadow.appendChild(t)}static get is(){return"reflex-uri-drop-box"}}Xe(Et);const St=Et;var kt=new RegExp(/\.svg$/),It=new RegExp(/\.txt$/),Nt=new RegExp(/\.png$/),Ct=new RegExp(/\.PNG$/),jt=new RegExp(/\.jpg$/),Rt=new RegExp(/\.json$/);class Mt extends HTMLElement{constructor(e){super(),this.shadow=this.attachShadow({mode:"open"}),this.node=e;var t=document.createElement("div");this.shadow.appendChild(t),this.node.define("data",(e=>{void 0===e.key?t.innerHTML="No Data":"object"==typeof e.value&&"columns"in e.value?t.innerHTML=e.key+"<br>"+e.value.length+"x"+e.value.columns.length+"<br>":e.key.match(Rt)?t.innerHTML=JSON.stringify(e.value):e.key.match(kt)?t.innerHTML=e.value:e.key.match(It)?t.innerHTML="<pre>"+e.value+"</pre>":e.key.match(Nt)||e.key.match(jt)||e.key.match(Ct)?t.innerHTML="<img src='"+e.value+"'></img>":t.innerHTML="Not support this format :"+e.key}))}static get is(){return"reflex-simple-render"}}Xe(Mt);const At=Mt;class Ot extends HTMLElement{constructor(){super(),this._modalVisible=!1,this._modal,this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n        <style>\n            /* The Modal (background) */\n            .modal {\n                display: none; \n                position: fixed; \n                z-index: 1000; \n                padding-top: 100px; \n                left: 0;\n                top: 0;\n                width: 100%; \n                height: 100%; \n                overflow: auto; \n                background-color: rgba(0,0,0,0.4); \n            }\n            /* Modal Content */\n            .modal-content {\n                position: relative;\n                background-color: #fefefe;\n                margin: auto;\n                padding: 0;\n                border: 1px solid #888;\n                width: 80%;\n                box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n                -webkit-animation-name: animatetop;\n                -webkit-animation-duration: 0.4s;\n                animation-name: animatetop;\n                animation-duration: 0.4s\n            }\n            /* Add Animation */\n            @-webkit-keyframes animatetop {\n                from {top:-300px; opacity:0} \n                to {top:0; opacity:1}\n            }\n            @keyframes animatetop {\n                from {top:-300px; opacity:0}\n                to {top:0; opacity:1}\n            }\n            /* The Close Button */\n            .close {\n                color: white;\n                float: right;\n                font-size: 28px;\n                font-weight: bold;\n            }\n            .close:hover,\n            .close:focus {\n            color: #000;\n            text-decoration: none;\n            cursor: pointer;\n            }\n            .modal-header {\n            padding: 2px 16px;\n            background-color: #000066;\n            color: white;\n            }\n            .modal-body {padding: 2px 16px; margin: 20px 2px}\n        </style>\n        <button>Open Modal</button>\n        <div class="modal">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <span class="close">&times;</span>\n                    <slot name="header"><h1>Config</h1></slot>\n                </div>\n                <div class="modal-body">\n                    <slot><slot>\n                </div>\n            </div>\n        </div>\n        '}connectedCallback(){this._modal=this.shadowRoot.querySelector(".modal"),this._modal.addEventListener("mouseover",(e=>{e.stopPropagation()})),this._modal.addEventListener("click",(e=>{e.stopPropagation()})),this.shadowRoot.querySelector("button").addEventListener("click",this._showModal.bind(this)),this.shadowRoot.querySelector(".close").addEventListener("click",this._hideModal.bind(this))}disconnectedCallback(){this.shadowRoot.querySelector("button").removeEventListener("click",this._showModal),this.shadowRoot.querySelector(".close").removeEventListener("click",this._hideModal)}_showModal(){this._modalVisible=!0,this._modal.style.display="block"}_hideModal(){this._modalVisible=!1,this._modal.style.display="none"}static get is(){return"reflex-modal"}}Xe(Ot);const Tt=Ot;class Lt extends HTMLElement{static get is(){return"reflex-ui-state-bridge-io"}constructor(e,t,n={},r){super(),this.shadow=this.attachShadow({mode:"open"}),this.bridge=e,this.node=t,this.args=n,this.onchange=r}set node(e){this._node=e}get node(){return this._node}set bridge(e){this._bridge=e}get bridge(){return this._bridge}set args(e){this._args=e}get args(){return this._args}connectedCallback(){this.render()}disconnectedCallback(){}render(){this.shadow.innerHTML="\n\t\t<style>\n\t\t\t:host{\n                all:initial;\n\t\t\t}\n            input {\n                width:100px;\n            }\n            .io {\n                float:left;\n            }\n            div {\n                min-height: 30px;\n            }\n\n\t\t</style>\n        ";var e=document.createElement("div");this.div=e;var t=this.bridge,n=this.node,r=this.args,o=r.io||"",i=(document.createElement("div"),document.createElement("input"));i.className="io",i.value=o,i.addEventListener("keyup",(e=>{13===e.keyCode?i.blur():i.style.backgroundColor="lightyellow"})),o.length>0&&(async()=>{await t.link(o,n),await t.link(n,o),i.style.backgroundColor="lightgreen",this.onchange&&this.onchange(o)})(),n._onMessageEffect_=(e,t)=>{i.style.backgroundColor,i.style.backgroundColor="#e5fee5",setTimeout((()=>{i.style.backgroundColor="lightgreen"}),200)},n._postMessageEffect_=e=>{i.style.backgroundColor,i.style.backgroundColor="#e5fee5",setTimeout((()=>{i.style.backgroundColor="lightgreen"}),200)},i.addEventListener("blur",(async e=>{var a=i.value;o!==a&&(o.length>0&&(t.unlink(o,n),t.unlink(n,o)),a.length>0?(await t.link(a,n),await t.link(n,a),i.style.backgroundColor="lightgreen"):i.style.backgroundColor="white",o=a,r.io=a,this.onchange&&this.onchange(o))})),this.div.appendChild(i),this.shadow.appendChild(this.div)}}const Dt=Xe(Lt);class Bt extends HTMLElement{set width(e){this._width=e}get width(){return this._width}static get is(){return"reflex-ui-bridge"}constructor(e,t,n={},r){super(),this.shadow=this.attachShadow({mode:"open"}),this.bridge=e,this.node=t,this.args=n,this.onchange=r}set node(e){this._node=e}get node(){return this._node}set bridge(e){this._bridge=e}get bridge(){return this._bridge}set args(e){this._args=e}get args(){return this._args}connectedCallback(){this.render()}disconnectedCallback(){}render(){this.shadow.innerHTML="\n\t\t<style>\n\t\t\t:host{\n                all:initial;\n\t\t\t}\n            input {\n                width:50px;\n            }\n            .in {\n                float:left;\n            }\n            .out {\n                float:right;\n            }\n            div {\n                min-height: 30px;\n            }\n\n\t\t</style>\n        ";var e=document.createElement("div");this.div=e;var t=this.bridge,n=this.node,r=this.args,o=r.input||"",i=(document.createElement("div"),document.createElement("input"));i.className="in";var a="white";i.value=o,i.addEventListener("keyup",(e=>{13===e.keyCode?i.blur():i.style.backgroundColor="lightyellow"})),o.length>0&&(t.link(o,n),i.style.backgroundColor="lightgreen",a="lightgreen"),n.effect=!0,n._onMessageEffect_=(e,t)=>{i.style.backgroundColor="#e5fee5",setTimeout((e=>{i.style.backgroundColor=a}),100)},n._postMessageEffect_=e=>{s.style.backgroundColor="#e5fee5",setTimeout((e=>{s.style.backgroundColor=c}),100)},i.addEventListener("blur",(e=>{var s=i.value;o!==s&&(o.length>0&&t.unlink(o,n),s.length>0?(t.link(s,n),i.style.backgroundColor="lightgreen"):i.style.backgroundColor="white",a=i.style.backgroundColor,o=s,r.input=s)}));var s=document.createElement("input"),c="white";s.className="out";var u=r.output||"";s.value=u,s.addEventListener("keyup",(e=>{13===e.keyCode?s.blur():s.style.backgroundColor="lightyellow"})),u.length>0&&(t.link(n,u),s.style.backgroundColor="lightgreen",c=s.style.backgroundColor),s.addEventListener("blur",(e=>{var o=s.value;u!==o&&(u.length>0&&t.unlink(n,u),o.length>0?(t.link(n,o),s.style.backgroundColor="lightgreen"):s.style.backgroundColor="white",c=s.style.backgroundColor,u=o,r.output=o)})),this.div.appendChild(i),this.div.appendChild(s),this.shadow.appendChild(this.div)}}Xe(Bt);const Pt=Bt;var Ft={value:()=>{}};function Ut(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new zt(r)}function zt(e){this._=e}function Ht(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Wt(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function qt(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Ft,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}zt.prototype=Ut.prototype={constructor:zt,on:function(e,t){var n,r=this._,o=Ht(e+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(e=o[i]).type)r[n]=qt(r[n],e.name,t);else if(null==t)for(n in r)r[n]=qt(r[n],e.name,null);return this}for(;++i<a;)if((n=(e=o[i]).type)&&(n=Wt(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zt(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const Vt=Ut;class Kt extends p{constructor(e,t){super(),this._=t,this.dispatch=e;var n=this;this._uuid="dispatch-"+this._uuid,this.onMessage=function(e,t){e.data,"code"in e&&e.code in n._&&n.dispatch.call(e.code,this,e.data)}}on(e,t){this.dispatch.on(e,t)}call(e,t,n){this.dispatch.call(e,t,n),"_from_"in n&&"external"==n._from_||this.postMessage({code:e,data:n})}}const Jt=function(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}var o=Vt(...arguments);return new Kt(o,r)};class Gt{constructor(e,t={}){this.core=e,this.options=t,this.core.bridge=new N(t.namespace||e.namespace||"reflexiv",t)}provides(){return["@reflexiv/bridge"]}init(){return console.log("bridge service init"),Promise.resolve()}start(){console.log("bridge service start")}destroy(){console.log("bridge service end"),this.core.bridge.close()}close(){this.destroy()}}class Zt{constructor(e,t={}){this.core=e,this.options=t;var n=new _e(t.namespace||"reflexiv",t);this.core.data=n}provides(){return["@reflexiv/data"]}init(){return console.log("data system service init"),Promise.resolve()}start(){console.log("data system service start")}destroy(){console.log("data system service close"),this.core.data.close()}close(){this.destroy()}}})(),r})()},683:(e,t,n)=>{"use strict";n.r(t),n.d(t,{app:()=>s});const r=JSON.parse('{"u2":"@reflexapp/pkg-starter","i8":"0.0.1"}');var o=n(76);const i=r.i8,a=r.u2.split("/").pop(),s=new o.GenericPackage(a,i,((e,t)=>(e,t)=>{e.setState(t);var n=e.getElement();return(0,o.getNode)(n).innerHTML="Package Starter Here : "+i,e.on("resize",(()=>{})),function(){}}),{},[]);var c=new o.Services;c.Register("@reflexiv/service-bridge",{init:o.serviceBridge,options:{}}),s.create=e=>{var t={},n={},r=new o.GenericContainer(e);((e,t)=>{var n=t.List().map((t=>{var n;return"init"in t&&"options"in t?n=new t.init(e,t.options):"function"==typeof t&&(n=new t(e)),n.init().then((e=>{n.start()}))}));return Promise.all(n)})(t,c).then((()=>{s.render(t)(r,n)}))}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(683)})()}));